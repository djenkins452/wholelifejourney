{% extends "base.html" %}

{% block title %}Journal | Whole Life Journey{% endblock %}

{% block content %}
  <div class="card">
    <h1>Journal</h1>
    {% if request.session.last_deleted_journal_id %}
      <div class="card" style="background:#fef3c7; margin-bottom:12px;">
        Entry deleted.
        <form method="post"
              action="{% url 'core:journal_restore' %}"
              style="display:inline;">
          {% csrf_token %}
          <button type="submit">Undo</button>
        </form>
      </div>
    {% endif %}

    {% if entries %}
      {% for entry in entries %}
        <div style="margin-bottom: 16px;">
          <div class="muted">
            {{ entry.created_at|date:"F j, Y â€” g:i A" }}
          </div>

          <p style="margin-top: 6px; white-space: pre-wrap;">
            {{ entry.body }}
          </p>

          <form method="post"
                action="{% url 'core:journal_delete' entry.id %}"
                style="margin-top: 8px;"
                onsubmit="return confirm('Delete this entry? This cannot be undone.');">
            {% csrf_token %}
            <button type="submit">Delete</button>
          </form>
        </div>

        <hr>
      {% endfor %}
    {% else %}
      <p class="muted">No journal entries yet.</p>
    {% endif %}
  </div>
{% endblock %}
